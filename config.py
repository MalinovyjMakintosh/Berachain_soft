import os
import json



ZERO_ADDRESS = '0x0000000000000000000000000000000000000000'

W_BERA = '0x5806E416dA447b267cEA759358cF22Cc41FAE80F'
STG_USDC = '0x6581e59A1C8dA66eD0D313a0d4029DcE2F746Cc5'
BTC_ADDRESS = '0x9DAD8A1F64692adeB74ACa26129e0F16897fF4BB'
BEX_W_BERA_STG_USDC_POOL = '0x7D5b5C1937ff1b18B45AbC64aeAB68663a7a58Ab'
BEX_BTC_POOL = '0x3F2090dc46629eeb36Db545f0e9E5084b67D11aE'
BERA_MIM_POOL =  "0xC793C76fE0D5c79550034983D966c21a50Fb5e38"
BERADOMAIN_ADDRESS = '0x8D20B92B4163140F413AA52A4106fF9490bf2122'
BEX_ADDRESS = '0x0d5862FDbdd12490f9b4De54c236cff63B038074'
HONEY_ADDRESS = '0x09ec711b81cD27A6466EC40960F2f8D85BB129D9'
BERPS_ADDRESS = '0x95c5B81Fb99c91D4EAE15a28302c0200607b9D4e'
BEND_ADDRESS = '0x9261b5891d3556e829579964B38fe706D0A2D04a'
AHONEY_ADDRESS = '0x7EeCA4205fF31f947EdBd49195a7A88E6A91161B'

AHONEY2_ADDRESS = '0x95c5B81Fb99c91D4EAE15a28302c0200607b9D4e'

AHONEY2_ABI = json.loads('''[{ "inputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "name": "makeWithdrawRequest", "outputs": [], "stateMutability": "nonpayable", "type": "function" }]''')


approve_abi = json.loads(''' [{ "inputs": [ { "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" } ], "name": "approve", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "nonpayable", "type": "function" }]''')


BERADOMAIN_ABI = json.loads('''[{ "stateMutability": "payable", "type": "function", "inputs": [ {"name": "chars", "internalType": "string[]", "type": "string[]"}, {"name": "duration", "internalType": "uint256", "type": "uint256"}, {"name": "whois", "internalType": "address", "type": "address"}, {"name": "metadataURI", "internalType": "string", "type": "string"}, {"name": "to", "internalType": "address", "type": "address"} ], "name": "mintNative", "outputs": [{"name": "", "internalType": "uint256", "type": "uint256"}] }]''')

BEX_ABI2 = json.loads('''[ { "inputs": [ { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" } ], "name": "transfer", "outputs": [], "stateMutability": "payable", "type": "function" } ]''')

BEX_ABI = json.loads('''[ { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address", "name": "receiver", "type": "address" }, { "internalType": "address[]", "name": "assetsIn", "type": "address[]" }, { "internalType": "uint256[]", "name": "amountsIn", "type": "uint256[]" } ], "name": "addLiquidity", "outputs": [ { "internalType": "address[]", "name": "shares", "type": "address[]" }, { "internalType": "uint256[]", "name": "shareAmounts", "type": "uint256[]" }, { "internalType": "address[]", "name": "liquidity", "type": "address[]" }, { "internalType": "uint256[]", "name": "liquidityAmounts", "type": "uint256[]" } ], "stateMutability": "payable", "type": "function" }, { "inputs": [ { "internalType": "enum IERC20DexModule.SwapKind", "name": "kind", "type": "uint8" }, { "components": [ { "internalType": "address", "name": "poolId", "type": "address" }, { "internalType": "address", "name": "assetIn", "type": "address" }, { "internalType": "uint256", "name": "amountIn", "type": "uint256" }, { "internalType": "address", "name": "assetOut", "type": "address" }, { "internalType": "uint256", "name": "amountOut", "type": "uint256" }, { "internalType": "bytes", "name": "userData", "type": "bytes" } ], "internalType": "struct IERC20DexModule.BatchSwapStep[]", "name": "swaps", "type": "tuple[]" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" } ], "name": "batchSwap", "outputs": [ { "internalType": "address[]", "name": "assets", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "stateMutability": "payable", "type": "function" }, { "inputs": [ { "internalType": "string", "name": "name", "type": "string" }, { "internalType": "address[]", "name": "assetsIn", "type": "address[]" }, { "internalType": "uint256[]", "name": "amountsIn", "type": "uint256[]" }, { "internalType": "string", "name": "poolType", "type": "string" }, { "components": [ { "components": [ { "internalType": "address", "name": "asset", "type": "address" }, { "internalType": "uint256", "name": "weight", "type": "uint256" } ], "internalType": "struct IERC20DexModule.AssetWeight[]", "name": "weights", "type": "tuple[]" }, { "internalType": "uint256", "name": "swapFee", "type": "uint256" } ], "internalType": "struct IERC20DexModule.PoolOptions", "name": "options", "type": "tuple" } ], "name": "createPool", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "payable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address", "name": "baseAsset", "type": "address" }, { "internalType": "address", "name": "quoteAsset", "type": "address" } ], "name": "getExchangeRate", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" } ], "name": "getLiquidity", "outputs": [ { "internalType": "address[]", "name": "asset", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" } ], "name": "getPoolName", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" } ], "name": "getPoolOptions", "outputs": [ { "components": [ { "components": [ { "internalType": "address", "name": "asset", "type": "address" }, { "internalType": "uint256", "name": "weight", "type": "uint256" } ], "internalType": "struct IERC20DexModule.AssetWeight[]", "name": "weights", "type": "tuple[]" }, { "internalType": "uint256", "name": "swapFee", "type": "uint256" } ], "internalType": "struct IERC20DexModule.PoolOptions", "name": "", "type": "tuple" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address[]", "name": "assets", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "name": "getPreviewAddLiquidityNoSwap", "outputs": [ { "internalType": "address[]", "name": "shares", "type": "address[]" }, { "internalType": "uint256[]", "name": "shareAmounts", "type": "uint256[]" }, { "internalType": "address[]", "name": "liqOut", "type": "address[]" }, { "internalType": "uint256[]", "name": "liquidityAmounts", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address[]", "name": "liquidity", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "name": "getPreviewAddLiquidityStaticPrice", "outputs": [ { "internalType": "address[]", "name": "shares", "type": "address[]" }, { "internalType": "uint256[]", "name": "shareAmounts", "type": "uint256[]" }, { "internalType": "address[]", "name": "liqOut", "type": "address[]" }, { "internalType": "uint256[]", "name": "liquidityAmounts", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "enum IERC20DexModule.SwapKind", "name": "kind", "type": "uint8" }, { "components": [ { "internalType": "address", "name": "poolId", "type": "address" }, { "internalType": "address", "name": "assetIn", "type": "address" }, { "internalType": "uint256", "name": "amountIn", "type": "uint256" }, { "internalType": "address", "name": "assetOut", "type": "address" }, { "internalType": "uint256", "name": "amountOut", "type": "uint256" }, { "internalType": "bytes", "name": "userData", "type": "bytes" } ], "internalType": "struct IERC20DexModule.BatchSwapStep[]", "name": "swaps", "type": "tuple[]" } ], "name": "getPreviewBatchSwap", "outputs": [ { "internalType": "address", "name": "asset", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address", "name": "asset", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" } ], "name": "getPreviewBurnShares", "outputs": [ { "internalType": "address[]", "name": "assets", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address[]", "name": "assets", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "name": "getPreviewSharesForLiquidity", "outputs": [ { "internalType": "address[]", "name": "shares", "type": "address[]" }, { "internalType": "uint256[]", "name": "shareAmounts", "type": "uint256[]" }, { "internalType": "address[]", "name": "liquidity", "type": "address[]" }, { "internalType": "uint256[]", "name": "liquidityAmounts", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address", "name": "asset", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" } ], "name": "getPreviewSharesForSingleSidedLiquidityRequest", "outputs": [ { "internalType": "address[]", "name": "assets", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "enum IERC20DexModule.SwapKind", "name": "kind", "type": "uint8" }, { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address", "name": "baseAsset", "type": "address" }, { "internalType": "uint256", "name": "baseAssetAmount", "type": "uint256" }, { "internalType": "address", "name": "quoteAsset", "type": "address" } ], "name": "getPreviewSwapExact", "outputs": [ { "internalType": "address", "name": "asset", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address", "name": "assetIn", "type": "address" }, { "internalType": "uint256", "name": "assetAmount", "type": "uint256" } ], "name": "getRemoveLiquidityExactAmountOut", "outputs": [ { "internalType": "address[]", "name": "assets", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address", "name": "assetOut", "type": "address" }, { "internalType": "uint256", "name": "sharesIn", "type": "uint256" } ], "name": "getRemoveLiquidityOneSideOut", "outputs": [ { "internalType": "address[]", "name": "assets", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" } ], "name": "getTotalShares", "outputs": [ { "internalType": "address[]", "name": "assets", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address", "name": "withdrawAddress", "type": "address" }, { "internalType": "address", "name": "assetIn", "type": "address" }, { "internalType": "uint256", "name": "amountIn", "type": "uint256" } ], "name": "removeLiquidityBurningShares", "outputs": [ { "internalType": "address[]", "name": "liquidity", "type": "address[]" }, { "internalType": "uint256[]", "name": "liquidityAmounts", "type": "uint256[]" } ], "stateMutability": "payable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "pool", "type": "address" }, { "internalType": "address", "name": "withdrawAddress", "type": "address" }, { "internalType": "address", "name": "assetOut", "type": "address" }, { "internalType": "uint256", "name": "amountOut", "type": "uint256" }, { "internalType": "address", "name": "sharesIn", "type": "address" }, { "internalType": "uint256", "name": "maxSharesIn", "type": "uint256" } ], "name": "removeLiquidityExactAmount", "outputs": [ { "internalType": "address[]", "name": "shares", "type": "address[]" }, { "internalType": "uint256[]", "name": "shareAmounts", "type": "uint256[]" }, { "internalType": "address[]", "name": "liquidity", "type": "address[]" }, { "internalType": "uint256[]", "name": "liquidityAmounts", "type": "uint256[]" } ], "stateMutability": "payable", "type": "function" }, { "inputs": [ { "internalType": "enum IERC20DexModule.SwapKind", "name": "kind", "type": "uint8" }, { "internalType": "address", "name": "poolId", "type": "address" }, { "internalType": "address", "name": "assetIn", "type": "address" }, { "internalType": "uint256", "name": "amountIn", "type": "uint256" }, { "internalType": "address", "name": "assetOut", "type": "address" }, { "internalType": "uint256", "name": "amountOutMin", "type": "uint256" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" } ], "name": "swap", "outputs": [ { "internalType": "uint256", "name": "amountOut", "type": "uint256" } ], "stateMutability": "payable", "type": "function" } ] ''')

HONEY_ABI = json.loads('''[{"inputs": [{"internalType": "contract IERC20", "name": "_honey", "type": "address"}], "stateMutability": "nonpayable", "type": "constructor"}, {"inputs": [], "name": "erc20Module", "outputs": [{"internalType": "contract IERC20Module", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "string", "name": "amoType", "type": "string"}, {"internalType": "address", "name": "amoAddr", "type": "address"}], "name": "getAMOCurrentLimit", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "getExchangable", "outputs": [{"components": [{"internalType": "contract IERC20", "name": "collateral", "type": "address"}, {"internalType": "bool", "name": "enabled", "type": "bool"}, {"internalType": "uint256", "name": "mintRate", "type": "uint256"}, {"internalType": "uint256", "name": "redemptionRate", "type": "uint256"}], "internalType": "struct ERC20Honey.ERC20Exchangable[]", "name": "", "type": "tuple[]"}], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [], "name": "getTotalCollateral", "outputs": [{"internalType": "address[]", "name": "", "type": "address[]"}, {"internalType": "uint256[]", "name": "", "type": "uint256[]"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "getTotalSupply", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "honey", "outputs": [{"internalType": "contract IERC20", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "honeyModule", "outputs": [{"internalType": "contract IHoneyModule", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "to", "type": "address"}, {"internalType": "contract IERC20", "name": "collateral", "type": "address"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}], "name": "mint", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "amountOut", "type": "uint256"}, {"internalType": "address", "name": "assetOut", "type": "address"}], "name": "previewExactOutCollateral", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "contract IERC20", "name": "collateral", "type": "address"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}], "name": "previewMint", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "contract IERC20", "name": "collateral", "type": "address"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}], "name": "previewRedeem", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "honeyOut", "type": "uint256"}, {"internalType": "address", "name": "assetIn", "type": "address"}], "name": "previewRequiredCollateral", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "to", "type": "address"}, {"internalType": "uint256", "name": "amount", "type": "uint256"}, {"internalType": "contract IERC20", "name": "collateral", "type": "address"}], "name": "redeem", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "nonpayable", "type": "function"}]
''')

BERPS_ABI = json.loads('''[{ "type": "function", "name": "accBlockWeightedMarketCap", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "accBlockWeightedMarketCapLastStored", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "accPnlPerToken", "inputs": [], "outputs": [{ "name": "", "type": "int256", "internalType": "int256" }], "stateMutability": "view" }, { "type": "function", "name": "accPnlPerTokenUsed", "inputs": [], "outputs": [{ "name": "", "type": "int256", "internalType": "int256" }], "stateMutability": "view" }, { "type": "function", "name": "accRewardsPerToken", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "allowance", "inputs": [{ "name": "owner", "type": "address", "internalType": "address" }, { "name": "spender", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "approve", "inputs": [{ "name": "spender", "type": "address", "internalType": "address" }, { "name": "amount", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "bool", "internalType": "bool" }], "stateMutability": "nonpayable" }, { "type": "function", "name": "asset", "inputs": [], "outputs": [{ "name": "", "type": "address", "internalType": "address" }], "stateMutability": "view" }, { "type": "function", "name": "availableAssets", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "balanceOf", "inputs": [{ "name": "account", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "balanceOfAssets", "inputs": [{ "name": "owner", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "cancelWithdrawRequest", "inputs": [{ "name": "shares", "type": "uint256", "internalType": "uint256" }, { "name": "unlockEpoch", "type": "uint256", "internalType": "uint256" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "claimBGT", "inputs": [{ "name": "amount", "type": "uint256", "internalType": "uint256" }, { "name": "recipient", "type": "address", "internalType": "address" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "collateralizationP", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "convertToAssets", "inputs": [{ "name": "shares", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "convertToShares", "inputs": [{ "name": "assets", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "currentEpoch", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "currentEpochEnd", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "currentEpochPositiveOpenPnl", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "currentEpochStart", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "currentMaxSupply", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "dailyAccPnlDelta", "inputs": [], "outputs": [{ "name": "", "type": "int256", "internalType": "int256" }], "stateMutability": "view" }, { "type": "function", "name": "decimals", "inputs": [], "outputs": [{ "name": "", "type": "uint8", "internalType": "uint8" }], "stateMutability": "view" }, { "type": "function", "name": "decreaseAllowance", "inputs": [{ "name": "spender", "type": "address", "internalType": "address" }, { "name": "subtractedValue", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "bool", "internalType": "bool" }], "stateMutability": "nonpayable" }, { "type": "function", "name": "deposit", "inputs": [{ "name": "assets", "type": "uint256", "internalType": "uint256" }, { "name": "receiver", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "nonpayable" }, { "type": "function", "name": "distributeReward", "inputs": [{ "name": "assets", "type": "uint256", "internalType": "uint256" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "epochLength", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "feesToPolP", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "forceNewEpoch", "inputs": [], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "getPendingAccBlockWeightedMarketCap", "inputs": [{ "name": "currentBlock", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "increaseAllowance", "inputs": [{ "name": "spender", "type": "address", "internalType": "address" }, { "name": "addedValue", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "bool", "internalType": "bool" }], "stateMutability": "nonpayable" }, { "type": "function", "name": "initialize", "inputs": [{ "name": "_name", "type": "string", "internalType": "string" }, { "name": "_symbol", "type": "string", "internalType": "string" }, { "name": "_contractAddresses", "type": "tuple", "internalType": "struct IBToken.ContractAddresses", "components": [{ "name": "asset", "type": "address", "internalType": "address" }, { "name": "owner", "type": "address", "internalType": "address" }, { "name": "manager", "type": "address", "internalType": "address" }, { "name": "pnlHandler", "type": "address", "internalType": "address" }] }, { "name": "_maxDailyAccPnlDelta", "type": "uint256", "internalType": "uint256" }, { "name": "_withdrawLockThresholdsPLow", "type": "uint256", "internalType": "uint256" }, { "name": "_withdrawLockThresholdsPHigh", "type": "uint256", "internalType": "uint256" }, { "name": "_maxSupplyIncreaseDailyP", "type": "uint256", "internalType": "uint256" }, { "name": "_lossesBurnP", "type": "uint256", "internalType": "uint256" }, { "name": "_epochLength", "type": "uint256", "internalType": "uint256" }, { "name": "_feesToPolP", "type": "uint256", "internalType": "uint256" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "initializeV2", "inputs": [], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "lastDailyAccPnlDeltaReset", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "lastMaxSupplyUpdate", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "lossesBurnP", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "makeWithdrawRequest", "inputs": [{ "name": "shares", "type": "uint256", "internalType": "uint256" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "manager", "inputs": [], "outputs": [{ "name": "", "type": "address", "internalType": "address" }], "stateMutability": "view" }, { "type": "function", "name": "marketCap", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "maxAccPnlPerToken", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "maxDailyAccPnlDelta", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "maxDeposit", "inputs": [{ "name": "owner", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "maxMint", "inputs": [{ "name": "", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "maxRedeem", "inputs": [{ "name": "owner", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "maxSupplyIncreaseDailyP", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "maxWithdraw", "inputs": [{ "name": "owner", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "mint", "inputs": [{ "name": "shares", "type": "uint256", "internalType": "uint256" }, { "name": "receiver", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "nonpayable" }, { "type": "function", "name": "name", "inputs": [], "outputs": [{ "name": "", "type": "string", "internalType": "string" }], "stateMutability": "view" }, { "type": "function", "name": "owner", "inputs": [], "outputs": [{ "name": "", "type": "address", "internalType": "address" }], "stateMutability": "view" }, { "type": "function", "name": "pendingBGT", "inputs": [{ "name": "owner", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "pnlHandler", "inputs": [], "outputs": [{ "name": "", "type": "address", "internalType": "address" }], "stateMutability": "view" }, { "type": "function", "name": "previewDeposit", "inputs": [{ "name": "assets", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "previewMint", "inputs": [{ "name": "shares", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "previewRedeem", "inputs": [{ "name": "shares", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "previewWithdraw", "inputs": [{ "name": "shares", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "registerProtocolFee", "inputs": [{ "name": "amount", "type": "uint256", "internalType": "uint256" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "renounceOwnership", "inputs": [], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "requestTransferOwnership", "inputs": [{ "name": "newOwner", "type": "address", "internalType": "address" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "rewardsBalances", "inputs": [{ "name": "owner", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "sendTo", "inputs": [{ "name": "to", "type": "address", "internalType": "address" }, { "name": "value", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "bool", "internalType": "bool" }], "stateMutability": "nonpayable" }, { "type": "function", "name": "setManager", "inputs": [{ "name": "newManager", "type": "address", "internalType": "address" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "symbol", "inputs": [], "outputs": [{ "name": "", "type": "string", "internalType": "string" }], "stateMutability": "view" }, { "type": "function", "name": "toProtocol", "inputs": [{ "name": "amount", "type": "uint256", "internalType": "uint256" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "toProtocolRecover", "inputs": [{ "name": "to", "type": "address", "internalType": "address" }, { "name": "amount", "type": "uint256", "internalType": "uint256" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "totalSupply", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "transfer", "inputs": [{ "name": "recipient", "type": "address", "internalType": "address" }, { "name": "amount", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "bool", "internalType": "bool" }], "stateMutability": "nonpayable" }, { "type": "function", "name": "transferFrom", "inputs": [{ "name": "sender", "type": "address", "internalType": "address" }, { "name": "recipient", "type": "address", "internalType": "address" }, { "name": "amount", "type": "uint256", "internalType": "uint256" }], "outputs": [{ "name": "", "type": "bool", "internalType": "bool" }], "stateMutability": "nonpayable" }, { "type": "function", "name": "updateAssetManagerAndPnlHandler", "inputs": [{ "name": "asset", "type": "address", "internalType": "address" }, { "name": "newManager", "type": "address", "internalType": "address" }, { "name": "newPnlHandler", "type": "address", "internalType": "address" }], "outputs": [], "stateMutability": "nonpayable" }, { "type": "function", "name": "withdraw", "inputs": [{ "name": "shares", "type": "uint256", "internalType": "uint256" }, { "name": "receiver", "type": "address", "internalType": "address" }], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "nonpayable" }, { "type": "function", "name": "withdrawLockThresholdsPHigh", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "function", "name": "withdrawLockThresholdsPLow", "inputs": [], "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }], "stateMutability": "view" }, { "type": "event", "name": "Approval", "inputs": [{ "indexed": true, "name": "owner", "type": "address", "internalType": "address" }, { "indexed": true, "name": "spender", "type": "address", "internalType": "address" }, { "indexed": false, "name": "value", "type": "uint256", "internalType": "uint256" }], "anonymous": false }, { "type": "event", "name": "OwnershipTransferred", "inputs": [{ "indexed": true, "name": "previousOwner", "type": "address", "internalType": "address" }, { "indexed": true, "name": "newOwner", "type": "address", "internalType": "address" }], "anonymous": false }, { "type": "event", "name": "Transfer", "inputs": [{ "indexed": true, "name": "from", "type": "address", "internalType": "address" }, { "indexed": true, "name": "to", "type": "address", "internalType": "address" }, { "indexed": false, "name": "value", "type": "uint256", "internalType": "uint256" }], "anonymous": false }, { "type": "event", "name": "AllowBurningUpdated", "inputs": [{ "indexed": false, "name": "newValue", "type": "bool", "internalType": "bool" }], "anonymous": false }, { "type": "event", "name": "PnlManagerChanged", "inputs": [{ "indexed": false, "name": "pnlManager", "type": "address", "internalType": "address" }], "anonymous": false }, { "type": "event", "name": "ManagerChanged", "inputs": [{ "indexed": false, "name": "manager", "type": "address", "internalType": "address" }], "anonymous": false }, { "type": "event", "name": "FeeToPol", "inputs": [{ "indexed": false, "name": "feeToPolP", "type": "uint256", "internalType": "uint256" }], "anonymous": false }, { "type": "event", "name": "MaxSupplyIncreased", "inputs": [{ "indexed": false, "name": "maxSupplyIncreaseDailyP", "type": "uint256", "internalType": "uint256" }], "anonymous": false }, { "type": "event", "name": "MaxWithdrawalDecreased", "inputs": [{ "indexed": false, "name": "newThreshold", "type": "uint256", "internalType": "uint256" }], "anonymous": false }, { "type": "event", "name": "WithdrawLockThresholdsPChanged", "inputs": [{ "indexed": false, "name": "pLow", "type": "uint256", "internalType": "uint256" }, { "indexed": false, "name": "pHigh", "type": "uint256", "internalType": "uint256" }], "anonymous": false }]''')

ERC20_ABI = json.loads('''[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"guy","type":"address"},{"name":"wad","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"src","type":"address"},{"name":"dst","type":"address"},{"name":"wad","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"wad","type":"uint256"}],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"dst","type":"address"},{"name":"wad","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"deposit","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"src","type":"address"},{"indexed":true,"name":"guy","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"src","type":"address"},{"indexed":true,"name":"dst","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"dst","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"src","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Withdrawal","type":"event"}]''')


BEND_ABI = json.loads('''[ { "inputs": [ { "internalType": "address", "name": "admin", "type": "address" } ], "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "address", "name": "implementation", "type": "address" } ], "name": "Upgraded", "type": "event" }, { "stateMutability": "payable", "type": "fallback" }, { "inputs": [], "name": "admin", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "implementation", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "_logic", "type": "address" }, { "internalType": "bytes", "name": "_data", "type": "bytes" } ], "name": "initialize", "outputs": [], "stateMutability": "payable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "newImplementation", "type": "address" } ], "name": "upgradeTo", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "newImplementation", "type": "address" }, { "internalType": "bytes", "name": "data", "type": "bytes" } ], "name": "upgradeToAndCall", "outputs": [], "stateMutability": "payable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "asset", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }, { "internalType": "address", "name": "onBehalfOf", "type": "address" }, { "internalType": "uint16", "name": "referralCode", "type": "uint16" } ], "name": "supply", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "stateMutability": "payable", "type": "function", "inputs": [ {"name": "asset", "internalType": "address", "type": "address"}, {"name": "amount", "internalType": "uint256", "type": "uint256"}, {"name": "to", "internalType": "address", "type": "address"} ], "name": "withdraw", "outputs": [] } ]''')